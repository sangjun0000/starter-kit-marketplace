import type { Review } from '@/types';

// Each review entry extends Review with the kitName for lookup purposes
export interface ReviewRecord extends Review {
  kitName: string;
  status: 'active' | 'hidden' | 'flagged';
}

export const REVIEWS: ReviewRecord[] = [
  // ─── website-builder-kit ────────────────────────────────────────────────
  {
    id: 'review-wb-001',
    kitName: 'website-builder-kit',
    kitId: 'kit-website-builder',
    userId: 'user-u001',
    userName: '김디자이너',
    rating: 5,
    comment: '비개발자인데 이거 하나로 끝! 랜딩 페이지를 2시간 만에 완성했어요. 정말 믿기지 않을 정도로 편리합니다.',
    version: '1.2.0',
    isVerified: true,
    helpfulCount: 47,
    createdAt: '2026-02-10T09:23:00Z',
    status: 'active',
  },
  {
    id: 'review-wb-002',
    kitName: 'website-builder-kit',
    kitId: 'kit-website-builder',
    userId: 'user-u002',
    userName: '소상공인 최씨',
    rating: 5,
    comment: '작은 음식점 웹사이트를 직접 만들었습니다. 개발자 없이 이게 가능하다니 놀랍네요. 강력 추천!',
    version: '1.2.0',
    isVerified: true,
    helpfulCount: 39,
    createdAt: '2026-02-08T14:11:00Z',
    status: 'active',
  },
  {
    id: 'review-wb-003',
    kitName: 'website-builder-kit',
    kitId: 'kit-website-builder',
    userId: 'user-u003',
    userName: '프리랜서 박작가',
    rating: 4,
    comment: '포트폴리오 사이트 만들기에 딱이에요. 처음에 설정이 조금 헷갈렸지만 가이드 따라가면 금방 됩니다.',
    version: '1.1.0',
    isVerified: true,
    helpfulCount: 22,
    createdAt: '2026-01-28T11:45:00Z',
    status: 'active',
  },
  {
    id: 'review-wb-004',
    kitName: 'website-builder-kit',
    kitId: 'kit-website-builder',
    userId: 'user-u004',
    userName: '마케터 이씨',
    rating: 5,
    comment: '클라이언트 랜딩 페이지 제작 시간이 1/3로 줄었어요. 업무 효율이 극적으로 올라갔습니다.',
    version: '1.2.0',
    isVerified: true,
    helpfulCount: 31,
    createdAt: '2026-02-05T16:30:00Z',
    status: 'active',
  },
  {
    id: 'review-wb-005',
    kitName: 'website-builder-kit',
    kitId: 'kit-website-builder',
    userId: 'user-u005',
    userName: '취미 블로거',
    rating: 4,
    comment: '개인 블로그 만드는데 잘 활용했습니다. 커스터마이징이 조금 제한적이긴 한데 입문용으로는 최고.',
    version: '1.2.0',
    isVerified: false,
    helpfulCount: 15,
    createdAt: '2026-02-12T08:00:00Z',
    status: 'active',
  },

  // ─── frontend-developer-kit ──────────────────────────────────────────────
  {
    id: 'review-fe-001',
    kitName: 'frontend-developer-kit',
    kitId: 'kit-frontend-developer',
    userId: 'user-u010',
    userName: '시니어 개발자 정씨',
    rating: 5,
    comment: 'Next.js + TanStack Query + Zustand 조합을 자동으로 세팅해줍니다. 새 프로젝트 시작할 때마다 쓰게 될 것 같아요.',
    version: '1.1.0',
    isVerified: true,
    helpfulCount: 58,
    createdAt: '2026-02-14T10:00:00Z',
    status: 'active',
  },
  {
    id: 'review-fe-002',
    kitName: 'frontend-developer-kit',
    kitId: 'kit-frontend-developer',
    userId: 'user-u011',
    userName: '주니어 개발자 강씨',
    rating: 4,
    comment: '처음 Next.js 배울 때 이게 있었으면 엄청 도움이 됐을 것 같아요. 지금도 많은 도움이 되고 있습니다.',
    version: '1.1.0',
    isVerified: true,
    helpfulCount: 33,
    createdAt: '2026-02-11T15:22:00Z',
    status: 'active',
  },
  {
    id: 'review-fe-003',
    kitName: 'frontend-developer-kit',
    kitId: 'kit-frontend-developer',
    userId: 'user-u012',
    userName: 'UI/UX 개발자 오씨',
    rating: 5,
    comment: '디자인 시스템 구축 스킬이 특히 마음에 들어요. 컴포넌트 일관성 유지하는 데 크게 도움됩니다.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 41,
    createdAt: '2026-01-30T09:15:00Z',
    status: 'active',
  },
  {
    id: 'review-fe-004',
    kitName: 'frontend-developer-kit',
    kitId: 'kit-frontend-developer',
    userId: 'user-u013',
    userName: '프론트엔드 리드 윤씨',
    rating: 4,
    comment: '팀 전체에 도입했습니다. 코드 리뷰 자동화로 PR 시간이 40% 줄었어요. 다만 에이전트가 간혹 과도한 제안을 할 때도 있습니다.',
    version: '1.1.0',
    isVerified: true,
    helpfulCount: 27,
    createdAt: '2026-02-16T13:45:00Z',
    status: 'active',
  },

  // ─── backend-developer-kit ───────────────────────────────────────────────
  {
    id: 'review-be-001',
    kitName: 'backend-developer-kit',
    kitId: 'kit-backend-developer',
    userId: 'user-u020',
    userName: '백엔드 개발자 한씨',
    rating: 5,
    comment: 'bkend.ai와 완벽하게 통합됩니다. API 설계부터 배포까지 이 Kit 하나로 다 됩니다. 공식 Kit 중 최고.',
    version: '1.0.2',
    isVerified: true,
    helpfulCount: 34,
    createdAt: '2026-02-17T11:30:00Z',
    status: 'active',
  },
  {
    id: 'review-be-002',
    kitName: 'backend-developer-kit',
    kitId: 'kit-backend-developer',
    userId: 'user-u021',
    userName: 'API 설계자 임씨',
    rating: 4,
    comment: 'REST API 설계 가이드가 정말 체계적입니다. 처음엔 Dynamic Level 개념이 낯설었지만 금방 익숙해져요.',
    version: '1.0.2',
    isVerified: true,
    helpfulCount: 19,
    createdAt: '2026-02-09T14:00:00Z',
    status: 'active',
  },
  {
    id: 'review-be-003',
    kitName: 'backend-developer-kit',
    kitId: 'kit-backend-developer',
    userId: 'user-u022',
    userName: '스타트업 CTO 장씨',
    rating: 4,
    comment: '팀 프로젝트 백엔드 표준화에 사용했습니다. 인증 시스템 구축이 특히 잘 되어 있어요.',
    version: '1.0.1',
    isVerified: true,
    helpfulCount: 16,
    createdAt: '2026-02-01T10:00:00Z',
    status: 'active',
  },

  // ─── fullstack-developer-kit ─────────────────────────────────────────────
  {
    id: 'review-fs-001',
    kitName: 'fullstack-developer-kit',
    kitId: 'kit-fullstack-developer',
    userId: 'user-u030',
    userName: '풀스택 개발자 조씨',
    rating: 5,
    comment: '이 Kit 하나로 스타트업 MVP를 2주 만에 런칭했습니다. 프론트엔드부터 백엔드까지 흐름이 너무 매끄러워요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 89,
    createdAt: '2026-02-18T09:00:00Z',
    status: 'active',
  },
  {
    id: 'review-fs-002',
    kitName: 'fullstack-developer-kit',
    kitId: 'kit-fullstack-developer',
    userId: 'user-u031',
    userName: '인디 해커 신씨',
    rating: 5,
    comment: 'Solo 개발자에게 이 Kit은 팀을 갖는 것과 같습니다. 모든 에이전트가 유기적으로 작동해서 놀랍네요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 72,
    createdAt: '2026-02-15T16:45:00Z',
    status: 'active',
  },
  {
    id: 'review-fs-003',
    kitName: 'fullstack-developer-kit',
    kitId: 'kit-fullstack-developer',
    userId: 'user-u032',
    userName: '개발 팀장 권씨',
    rating: 4,
    comment: '팀 온보딩에 활용하고 있습니다. 신규 개발자들이 빠르게 프로젝트 구조를 파악할 수 있어요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 45,
    createdAt: '2026-02-10T12:30:00Z',
    status: 'active',
  },
  {
    id: 'review-fs-004',
    kitName: 'fullstack-developer-kit',
    kitId: 'kit-fullstack-developer',
    userId: 'user-u033',
    userName: '프리랜서 개발자 엄씨',
    rating: 5,
    comment: '클라이언트 프로젝트에 도입 후 납품 시간이 절반으로 줄었습니다. 이제 이 Kit 없이는 못 살겠어요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 38,
    createdAt: '2026-02-12T17:00:00Z',
    status: 'active',
  },

  // ─── devops-engineer-kit ────────────────────────────────────────────────
  {
    id: 'review-do-001',
    kitName: 'devops-engineer-kit',
    kitId: 'kit-devops-engineer',
    userId: 'user-u040',
    userName: 'DevOps 엔지니어 최씨',
    rating: 4,
    comment: 'GitHub Actions 워크플로우 자동 생성이 정말 편합니다. Docker 설정도 프로젝트에 맞게 잘 잡아줘요.',
    version: '1.0.1',
    isVerified: true,
    helpfulCount: 28,
    createdAt: '2026-02-13T11:00:00Z',
    status: 'active',
  },
  {
    id: 'review-do-002',
    kitName: 'devops-engineer-kit',
    kitId: 'kit-devops-engineer',
    userId: 'user-u041',
    userName: '클라우드 아키텍트 남씨',
    rating: 5,
    comment: 'Vercel + bkend.ai 배포 연동이 완벽합니다. CI/CD 파이프라인 구성 시간이 80% 단축됐어요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 42,
    createdAt: '2026-01-28T14:20:00Z',
    status: 'active',
  },
  {
    id: 'review-do-003',
    kitName: 'devops-engineer-kit',
    kitId: 'kit-devops-engineer',
    userId: 'user-u042',
    userName: '백엔드/인프라 담당 홍씨',
    rating: 4,
    comment: 'QA 자동화와 갭 탐지기 에이전트 조합이 뛰어납니다. 프로덕션 이슈를 사전에 잡아주는 느낌이에요.',
    version: '1.0.1',
    isVerified: true,
    helpfulCount: 21,
    createdAt: '2026-02-06T09:50:00Z',
    status: 'active',
  },

  // ─── mobile-app-kit ─────────────────────────────────────────────────────
  {
    id: 'review-mo-001',
    kitName: 'mobile-app-kit',
    kitId: 'kit-mobile-app',
    userId: 'user-u050',
    userName: '모바일 개발자 문씨',
    rating: 4,
    comment: 'Expo Router 설정이 자동으로 잡혀서 편리해요. React Native 입문자에게 특히 도움이 될 것 같습니다.',
    version: '0.9.2',
    isVerified: true,
    helpfulCount: 18,
    createdAt: '2026-02-16T13:00:00Z',
    status: 'active',
  },
  {
    id: 'review-mo-002',
    kitName: 'mobile-app-kit',
    kitId: 'kit-mobile-app',
    userId: 'user-u051',
    userName: '앱 개발 스타트업 이씨',
    rating: 5,
    comment: '첫 iOS/Android 앱을 이 Kit으로 만들었어요. 크로스 플랫폼 이슈 없이 깔끔하게 돌아갑니다.',
    version: '0.9.2',
    isVerified: true,
    helpfulCount: 31,
    createdAt: '2026-02-07T16:30:00Z',
    status: 'active',
  },
  {
    id: 'review-mo-003',
    kitName: 'mobile-app-kit',
    kitId: 'kit-mobile-app',
    userId: 'user-u052',
    userName: '프리랜서 앱 개발자 류씨',
    rating: 4,
    comment: 'NativeWind 설정이 자동으로 되어서 너무 좋습니다. 커뮤니티 Kit인데 퀄리티가 공식 수준이에요.',
    version: '0.9.1',
    isVerified: false,
    helpfulCount: 12,
    createdAt: '2026-01-31T10:45:00Z',
    status: 'active',
  },

  // ─── data-analysis-kit ──────────────────────────────────────────────────
  {
    id: 'review-da-001',
    kitName: 'data-analysis-kit',
    kitId: 'kit-data-analysis',
    userId: 'user-u060',
    userName: '데이터 사이언티스트 안씨',
    rating: 5,
    comment: 'Jupyter MCP 서버 연동이 특히 훌륭합니다. Claude와 대화하면서 데이터 분석하는 경험이 완전히 달라졌어요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 44,
    createdAt: '2026-02-14T09:00:00Z',
    status: 'active',
  },
  {
    id: 'review-da-002',
    kitName: 'data-analysis-kit',
    kitId: 'kit-data-analysis',
    userId: 'user-u061',
    userName: '마케팅 분석가 황씨',
    rating: 4,
    comment: '파이썬 잘 못 해도 데이터 분석할 수 있게 도와줘요. 비즈니스 인사이트 도출에 큰 도움이 됩니다.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 29,
    createdAt: '2026-02-10T14:30:00Z',
    status: 'active',
  },
  {
    id: 'review-da-003',
    kitName: 'data-analysis-kit',
    kitId: 'kit-data-analysis',
    userId: 'user-u062',
    userName: '연구원 유씨',
    rating: 5,
    comment: '학술 연구 데이터 분석에 활용하고 있습니다. 코드 품질 분석과 최적화 제안이 매우 유용해요.',
    version: '1.0.0',
    isVerified: true,
    helpfulCount: 23,
    createdAt: '2026-02-08T11:15:00Z',
    status: 'active',
  },

  // ─── student-starter-kit ────────────────────────────────────────────────
  {
    id: 'review-ss-001',
    kitName: 'student-starter-kit',
    kitId: 'kit-student-starter',
    userId: 'user-u070',
    userName: '대학생 백씨',
    rating: 5,
    comment: 'HTML/CSS도 모르던 제가 이 Kit으로 첫 웹사이트를 만들었어요! 설명이 너무 친절하고 단계별로 잘 안내해줍니다.',
    version: '1.3.0',
    isVerified: true,
    helpfulCount: 156,
    createdAt: '2026-02-20T10:00:00Z',
    status: 'active',
  },
  {
    id: 'review-ss-002',
    kitName: 'student-starter-kit',
    kitId: 'kit-student-starter',
    userId: 'user-u071',
    userName: '고등학생 차씨',
    rating: 5,
    comment: '과제로 웹사이트 만들어야 했는데 이 Kit 덕분에 A+ 받았어요! 친구들한테도 다 추천했습니다.',
    version: '1.3.0',
    isVerified: true,
    helpfulCount: 98,
    createdAt: '2026-02-18T15:30:00Z',
    status: 'active',
  },
  {
    id: 'review-ss-003',
    kitName: 'student-starter-kit',
    kitId: 'kit-student-starter',
    userId: 'user-u072',
    userName: '직장인 코딩 입문자 용씨',
    rating: 5,
    comment: '독학으로 코딩 배우다가 포기할 뻔 했는데 이 Kit이 구원이었어요. 이제 JavaScript 문법이 보이기 시작했습니다.',
    version: '1.2.0',
    isVerified: true,
    helpfulCount: 87,
    createdAt: '2026-02-15T09:45:00Z',
    status: 'active',
  },
  {
    id: 'review-ss-004',
    kitName: 'student-starter-kit',
    kitId: 'kit-student-starter',
    userId: 'user-u073',
    userName: '주부 개발자 전씨',
    rating: 5,
    comment: '육아하면서 시간 틈틈이 공부했는데 이 Kit이 있어서 헤매지 않고 따라갈 수 있었어요.',
    version: '1.3.0',
    isVerified: true,
    helpfulCount: 67,
    createdAt: '2026-02-11T13:20:00Z',
    status: 'active',
  },
  {
    id: 'review-ss-005',
    kitName: 'student-starter-kit',
    kitId: 'kit-student-starter',
    userId: 'user-u074',
    userName: '취준생 성씨',
    rating: 4,
    comment: '비전공자로 개발 취업 준비 중입니다. 포트폴리오 첫 프로젝트로 좋은 출발점이 되었어요.',
    version: '1.3.0',
    isVerified: false,
    helpfulCount: 41,
    createdAt: '2026-02-09T08:00:00Z',
    status: 'active',
  },
];

/**
 * Compute the rating summary for a specific kit.
 */
export function computeRatingSummary(kitName: string) {
  const kitReviews = REVIEWS.filter((r) => r.kitName === kitName && r.status === 'active');
  const total = kitReviews.length;

  if (total === 0) {
    return {
      average: 0,
      total: 0,
      distribution: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },
    };
  }

  const distribution = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 } as Record<1 | 2 | 3 | 4 | 5, number>;
  let sum = 0;
  for (const review of kitReviews) {
    const rating = review.rating as 1 | 2 | 3 | 4 | 5;
    distribution[rating] = (distribution[rating] ?? 0) + 1;
    sum += review.rating;
  }

  return {
    average: Math.round((sum / total) * 10) / 10,
    total,
    distribution,
  };
}
